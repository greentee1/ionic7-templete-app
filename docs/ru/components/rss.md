# RSS Data Component

>Этот компонент предназначен для загрузки, отображения и управления новостями и RSS-лентами в приложении Ionic и Angular. Компонент обеспечивает выбор источников новостей, парсинг RSS, отображение новостей с возможностью добавления их в избранное, а также управление списком лент. Для уникальной идентификации новостей используется MD5-хеширование заголовков. Данные избранных новостей и лент синхронизируются с Firebase Firestore и локальным хранилищем.

## Используемые компоненты и директивы

>В компоненте используются стандартные компоненты Ionic и Angular для построения UI и взаимодействия с данными:

   - `ion-segment`, `ion-segment-button` - переключение между разделами «Новости» и «Ленты».

    - `ion-list`, `ion-item` - для отображения списков новостей и лент.

    - `ion-button` - кнопки управления (добавить, удалить, избранное).

    - `ion-icon` - иконки, в том числе для отметки избранного (звездочка).

    - `ion-input`, `ion-textarea` - для редактирования описаний и URL лент.

    - Angular директивы *ngFor, *ngIf - для рендеринга списков и условного отображения.

    - Двухстороннее связывание [(ngModel)] и реактивные формы для управления вводом.

    - Сервис FirestoreService - для взаимодействия с Firebase.

    - HTTP клиент Angular - для загрузки RSS через прокси.

## Ключевые функции

- Загрузка и парсинг RSS-лент: Компонент загружает RSS с нескольких активных источников, парсит XML, извлекает новости и формирует уникальные GUID с помощью MD5 от заголовков.

- Управление лентами: Пользователь может добавлять, редактировать и удалять RSS-ленты, которые хранятся локально и в Firebase.

- Избранные новости: Пользователь отмечает новости звездочкой; список избранных хранится в localStorage и Firebase, синхронизируется при загрузке.

- Фильтрация по источникам: Можно выбрать конкретный источник новостей или все сразу.

- Предпросмотр новостей: В режиме предпросмотра новости открываются внутри приложения через iframe.

- Перевод описаний: Встроена базовая логика для перевода описаний новостей на выбранный язык.

- Кэширование и синхронизация: Данные лент и избранных новостей сохраняются и загружаются из localStorage и Firestore для офлайн-доступа и синхронизации между устройствами.

## Основные структуры данных

- NewsSource (Лента):

        guid: уникальный идентификатор ленты

        url: URL RSS-ленты

        name: название источника

        isActive: активна ли лента для загрузки

- NewsItem (Новость):

        title: заголовок новости

        description: описание (текст без HTML)

        link: ссылка на полную новость

        image: URL изображения (если есть)

        pubDate: дата публикации

        source: название источника

        sourceGuid: GUID источника

        guid: уникальный идентификатор новости (MD5 заголовка)

        favicon: иконка источника

- FeedItem (Лента для редактирования):

        description: описание ленты

        url: URL ленты

        guid: уникальный идентификатор

        isEditing: флаг режима редактирования

        originalDescription: исходное описание (для перевода)

        sourceGuid: GUID источника

## Ключевые методы и логика



- fetchRssFromAllActiveSources() - загружает новости из всех активных лент, парсит и обновляет список newsItems.

- fetchRssFromSource(source) - загружает и парсит RSS конкретной ленты.

- toggleFavorite(news) - переключает статус избранного для новости, обновляет localStorage и Firestore.

- loadFavoritesFromFirestore() - загружает список избранных новостей из Firestore при инициализации.

- saveFavorites() - сохраняет список избранных в localStorage и Firestore.

- loadFeedsFromFirestore() / saveFeedsToFirestore() - загрузка и сохранение списка лент в Firestore.

- addNewFeedItem() / saveEditing(item) / deleteFeedItem(item) - управление лентами (создание, редактирование, удаление).

- translateDescription(item) - базовый перевод описания новости.

- fetchFavicons() - загрузка иконок источников новостей.

- sortNewsByDate() - сортировка новостей по дате публикации.

## Особенности реализации



- Для генерации уникального GUID новости используется MD5-хеш заголовка (функция md5).

- RSS загружается через прокси https://api.allorigins.win/raw?url=, чтобы избежать CORS.

- Данные синхронизируются с Firestore по пути profiles/{userId} с сохранением компонентов под разными ключами (favorites, feeds и др.).

- Используется реактивная форма для редактирования лент.

- Поддерживается переключение языков с помощью @ngx-translate/core.

- UI адаптирован под Ionic с использованием стандартных компонентов.

## Стилизация



- Используются стандартные стили Ionic для списков, кнопок и форм.

- Для иконок избранного применяются динамические классы (звезда заполнена/пустая).

- Предусмотрены стили для карточек новостей и лент с тенями и отступами.

- Адаптивный дизайн для корректного отображения на мобильных устройствах.


